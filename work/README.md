#### 项目名称：

​			在线OJ系统

#### 做该项目的原因：

​			由于本人之前刷题的时用的就是在线OJ系统，因此比较好奇这样的一个系统是怎么进行操作以		及运作的。正巧学习了网络方面的知识，所以就通过查阅资料询问老师，完成了这么一个具有在		线判题功能的OJ系统。

#### 项目实现：

##### 			项目原理：

​					该项目实现的是一个具有在线判题功能的http服务器，用户通过访问指定对应的URL，分				别进行浏览全部试题信息、获取单个试题信息、以及编写对应的代码通过网络传输将代码发				送至服务器，服务器对代码进行编译处理之后，最后将结果返回给用户，等一系列操作。

##### 			项目模块：

​					oj_server模块：提供http服务，并串联试题模块和编译模块。

​					试题模块        ： 负责从配置文件中加载题目，并且提供相应的接口给oj_server模块使用。

​					编译模块        ： 负责创建一个子进程并编译运行用户编写的代码，并将结果返回给用户。

##### 			项目流程：

​					该项目使用了开源的库实现了一个http的服务器，用来接收以及响应用户的请求。并且调				    用了开源库库中的函数，根据用户请求的不同URL以及不同的方法，去做对应的业务处理					工作。

​					（1）当用户请求OJ服务器的ip地址以及端口，那么说明用户想要获取OJ系统的整个试题信							  息，此时调用试题模块提供的接口，获取OJ系统中整个试题信息，并且通过开源的模							  板技术将该信息渲染到HTML页面中，并且返回给用户，呈现出所有试题信息。

​					（2）当用户点击某个试题的标题时，此时请求对应的试题的URL。那么OJ系统调用试题模							  块提供的接口，获取该试题的详细信息以及编写代码的窗口，同样的渲染到HTML页							  面中，返回给用户。

​					（3）当用户提交编写好的代码之后，OJ系统从正文中解析出代码，并且进行URL解码，之							  后为代码添加上对应的头文件以及测试用例，调用编译模块提供的接口编译运行代							  码，最终将编译运行的结果通过模板技术渲染HTML页面返回给用户。

#### 项目问题及解决办法：

​			1.当用户进行上述（2）操作时，虽然每个题目对应的URL中有每个试题的题号，但是OJ系统无			   法获取这些题号，也就没有办法获取对应的试题信息。

​					解决办法：使用正则表达式\d来匹配URL中的题号，以至于获取题目信息。但是需要注									   意，若直接使用\d会被编译器认为特殊符号进行编译。因此我们需要使用R"( 										\d)"，这样告诉编译器特殊字符就按字面源码进行编译。

​			2.由于OJ系统中的题目有很多，因此其题号肯定不局限于个位数，而\d只能匹配个位数。

​					解决办法：采用\d+进行匹配，这样可以匹配多字符。

​			3.编译模块，采用创建线程进行编译运行，因为编译运行操作是要进行程序替换的，而线程进			   行程序替换就会将当前OJ进程中的数据段和代码段替换掉，并且同一进程中的线程是共享进			   程数据段和代码段的，这样就造成其他代码无法编译。

​					解决办法：采用fork（）创建进程，进行编译运行操作。

​			4.没有办法定位每个代码对应的用户。

​					解决方法：采用时间戳命名文件即可。

#### 项目中的不足以及优化

​			1.前端页面风格较差，需要设计更好看的前端页面。

​			2.该项目采用的是文件存储试题数据，如果试题数据过多，那么使用文件存储效率会极低。因			   此可以选择采用数据库的支持，对试题数据、编译和运行结果进行存储。

​			3.如果用户连续提交代码，OJ系统没有办法应对，只能连续接收。因此，可以限制提交时间，				比如：每次提交后，10s后才可再次提交。